#!/bin/sh

echo 'Concatenating all pieces...'

ulimit -n 2560

# cat $(ls -1 /Users/zszen/Desktop/Code/PyGadgets/m3u8/ts/*.ts | sort -n ) > all.ts

echo 'Repackaging...'
# ffmpeg -i all.ts -acodec copy -vcodec copy -bsf:a aac_adtstoasc $1


# ffmpeg -i "concat:ts/1.ts|ts/2.ts|ts/3.ts|ts/4.ts|ts/5.ts|ts/6.ts|ts/7.ts|ts/8.ts|ts/9.ts|ts/10.ts|ts/11.ts|ts/12.ts|ts/13.ts|ts/14.ts|ts/15.ts|ts/16.ts|ts/17.ts|ts/18.ts|ts/19.ts|ts/20.ts|ts/21.ts|ts/22.ts|ts/23.ts|ts/24.ts|ts/25.ts|ts/26.ts|ts/27.ts|ts/28.ts|ts/29.ts|ts/30.ts|ts/31.ts|ts/32.ts|ts/33.ts|ts/34.ts|ts/35.ts|ts/36.ts|ts/37.ts|ts/38.ts|ts/39.ts|ts/40.ts|ts/41.ts|ts/42.ts|ts/43.ts|ts/44.ts|ts/45.ts|ts/46.ts|ts/47.ts|ts/48.ts|ts/49.ts|ts/50.ts|ts/51.ts|ts/52.ts|ts/53.ts|ts/54.ts|ts/55.ts|ts/56.ts|ts/57.ts|ts/58.ts|ts/59.ts|ts/60.ts|ts/61.ts|ts/62.ts|ts/63.ts|ts/64.ts|ts/65.ts|ts/66.ts|ts/67.ts|ts/68.ts|ts/69.ts|ts/70.ts|ts/71.ts|ts/72.ts|ts/73.ts|ts/74.ts|ts/75.ts|ts/76.ts|ts/77.ts|ts/78.ts|ts/79.ts|ts/80.ts|ts/81.ts|ts/82.ts|ts/83.ts|ts/84.ts|ts/85.ts|ts/86.ts|ts/87.ts|ts/88.ts|ts/89.ts|ts/90.ts|ts/91.ts|ts/92.ts|ts/93.ts|ts/94.ts|ts/95.ts|ts/96.ts|ts/97.ts|ts/98.ts|ts/99.ts|ts/100.ts|ts/101.ts|ts/102.ts|ts/103.ts|ts/104.ts|ts/105.ts|ts/106.ts|ts/107.ts|ts/108.ts|ts/109.ts|ts/110.ts|ts/111.ts|ts/112.ts|ts/113.ts|ts/114.ts|ts/115.ts|ts/116.ts|ts/117.ts|ts/118.ts|ts/119.ts|ts/120.ts|ts/121.ts|ts/122.ts|ts/123.ts|ts/124.ts|ts/125.ts|ts/126.ts|ts/127.ts|ts/128.ts|ts/129.ts|ts/130.ts|ts/131.ts|ts/132.ts|ts/133.ts|ts/134.ts|ts/135.ts|ts/136.ts|ts/137.ts|ts/138.ts|ts/139.ts|ts/140.ts|ts/141.ts|ts/142.ts|ts/143.ts|ts/144.ts|ts/145.ts|ts/146.ts|ts/147.ts|ts/148.ts|ts/149.ts|ts/150.ts|ts/151.ts|ts/152.ts|ts/153.ts|ts/154.ts|ts/155.ts|ts/156.ts|ts/157.ts|ts/158.ts|ts/159.ts|ts/160.ts|ts/161.ts|ts/162.ts|ts/163.ts|ts/164.ts|ts/165.ts|ts/166.ts|ts/167.ts|ts/168.ts|ts/169.ts|ts/170.ts|ts/171.ts|ts/172.ts|ts/173.ts|ts/174.ts|ts/175.ts|ts/176.ts|ts/177.ts|ts/178.ts|ts/179.ts|ts/180.ts|ts/181.ts|ts/182.ts|ts/183.ts|ts/184.ts|ts/185.ts|ts/186.ts|ts/187.ts|ts/188.ts|ts/189.ts|ts/190.ts|ts/191.ts|ts/192.ts|ts/193.ts|ts/194.ts|ts/195.ts|ts/196.ts|ts/197.ts|ts/198.ts|ts/199.ts|ts/200.ts|ts/201.ts|ts/202.ts|ts/203.ts|ts/204.ts|ts/205.ts|ts/206.ts|ts/207.ts|ts/208.ts|ts/209.ts|ts/210.ts|ts/211.ts|ts/212.ts|ts/213.ts|ts/214.ts|ts/215.ts|ts/216.ts|ts/217.ts|ts/218.ts|ts/219.ts|ts/220.ts|ts/221.ts|ts/222.ts|ts/223.ts|ts/224.ts|ts/225.ts|ts/226.ts|ts/227.ts|ts/228.ts|ts/229.ts|ts/230.ts|ts/231.ts|ts/232.ts|ts/233.ts|ts/234.ts|ts/235.ts|ts/236.ts|ts/237.ts|ts/238.ts|ts/239.ts|ts/240.ts|ts/241.ts|ts/242.ts|ts/243.ts|ts/244.ts|ts/245.ts|ts/246.ts|ts/247.ts|ts/248.ts|ts/249.ts|ts/250.ts|ts/251.ts|ts/252.ts|ts/253.ts|ts/254.ts|ts/255.ts|ts/256.ts|ts/257.ts|ts/258.ts|ts/259.ts|ts/260.ts|ts/261.ts|ts/262.ts|ts/263.ts|ts/264.ts|ts/265.ts|ts/266.ts|ts/267.ts|ts/268.ts|ts/269.ts|ts/270.ts|ts/271.ts|ts/272.ts|ts/273.ts|ts/274.ts|ts/275.ts|ts/276.ts|ts/277.ts|ts/278.ts|ts/279.ts|ts/280.ts|ts/281.ts|ts/282.ts|ts/283.ts|ts/284.ts|ts/285.ts|ts/286.ts|ts/287.ts|ts/288.ts|ts/289.ts|ts/290.ts|ts/291.ts|ts/292.ts|ts/293.ts|ts/294.ts|ts/295.ts|ts/296.ts|ts/297.ts|ts/298.ts|ts/299.ts|ts/300.ts|ts/301.ts|ts/302.ts|ts/303.ts|ts/304.ts|ts/305.ts|ts/306.ts|ts/307.ts|ts/308.ts|ts/309.ts|ts/310.ts|ts/311.ts|ts/312.ts|ts/313.ts|ts/314.ts|ts/315.ts|ts/316.ts|ts/317.ts|ts/318.ts|ts/319.ts|ts/320.ts|ts/321.ts|ts/322.ts|ts/323.ts|ts/324.ts|ts/325.ts|ts/326.ts|ts/327.ts|ts/328.ts|ts/329.ts|ts/330.ts|ts/331.ts|ts/332.ts|ts/333.ts|ts/334.ts|ts/335.ts|ts/336.ts|ts/337.ts|ts/338.ts|ts/339.ts|ts/340.ts|ts/341.ts|ts/342.ts|ts/343.ts|ts/344.ts|ts/345.ts|ts/346.ts|ts/347.ts|ts/348.ts|ts/349.ts|ts/350.ts|ts/351.ts|ts/352.ts|ts/353.ts|ts/354.ts|ts/355.ts|ts/356.ts|ts/357.ts|ts/358.ts|ts/359.ts|ts/360.ts|ts/361.ts|ts/362.ts|ts/363.ts|ts/364.ts|ts/365.ts|ts/366.ts|ts/367.ts|ts/368.ts|ts/369.ts|ts/370.ts|ts/371.ts|ts/372.ts|ts/373.ts|ts/374.ts|ts/375.ts|ts/376.ts|ts/377.ts|ts/378.ts|ts/379.ts|ts/380.ts|ts/381.ts|ts/382.ts|ts/383.ts|ts/384.ts|ts/385.ts|ts/386.ts|ts/387.ts|ts/388.ts|ts/389.ts|ts/390.ts|ts/391.ts|ts/392.ts|ts/393.ts|ts/394.ts|ts/395.ts|ts/396.ts|ts/397.ts|ts/398.ts|ts/399.ts|ts/400.ts|ts/401.ts|ts/402.ts|ts/403.ts|ts/404.ts|ts/405.ts|ts/406.ts|ts/407.ts|ts/408.ts|ts/409.ts|ts/410.ts|ts/411.ts|ts/412.ts|ts/413.ts|ts/414.ts|ts/415.ts|ts/416.ts|ts/417.ts|ts/418.ts|ts/419.ts|ts/420.ts|ts/421.ts|ts/422.ts|ts/423.ts|ts/424.ts|ts/425.ts|ts/426.ts|ts/427.ts|ts/428.ts|ts/429.ts|ts/430.ts|ts/431.ts|ts/432.ts|ts/433.ts|ts/434.ts|ts/435.ts|ts/436.ts|ts/437.ts|ts/438.ts|ts/439.ts|ts/440.ts|ts/441.ts|ts/442.ts|ts/443.ts|ts/444.ts|ts/445.ts|ts/446.ts|ts/447.ts|ts/448.ts|ts/449.ts|ts/450.ts|ts/451.ts|ts/452.ts|ts/453.ts|ts/454.ts|ts/455.ts|ts/456.ts|ts/457.ts|ts/458.ts|ts/459.ts|ts/460.ts|ts/461.ts|ts/462.ts|ts/463.ts|ts/464.ts|ts/465.ts|ts/466.ts|ts/467.ts|ts/468.ts|ts/469.ts|ts/470.ts|ts/471.ts|ts/472.ts|ts/473.ts|ts/474.ts|ts/475.ts|ts/476.ts|ts/477.ts|ts/478.ts|ts/479.ts|ts/480.ts|ts/481.ts|ts/482.ts|ts/483.ts|ts/484.ts|ts/485.ts|ts/486.ts|ts/487.ts|ts/488.ts|ts/489.ts|ts/490.ts|ts/491.ts|ts/492.ts|ts/493.ts|ts/494.ts|ts/495.ts|ts/496.ts|ts/497.ts|ts/498.ts|ts/499.ts|ts/500.ts|ts/501.ts|ts/502.ts|ts/503.ts|ts/504.ts|ts/505.ts|ts/506.ts|ts/507.ts|ts/508.ts|ts/509.ts|ts/510.ts|ts/511.ts|ts/512.ts|ts/513.ts|ts/514.ts|ts/515.ts|ts/516.ts|ts/517.ts|ts/518.ts|ts/519.ts|ts/520.ts|ts/521.ts|ts/522.ts|ts/523.ts|ts/524.ts|ts/525.ts|ts/526.ts|ts/527.ts|ts/528.ts|ts/529.ts|ts/530.ts|ts/531.ts|ts/532.ts|ts/533.ts|" -acodec copy -vcodec copy -absf aac_adtstoasc out.mp4
